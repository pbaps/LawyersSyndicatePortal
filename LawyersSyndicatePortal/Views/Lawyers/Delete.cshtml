@model LawyersSyndicatePortal.Models.Lawyer

@{
    ViewBag.Title = "حذف المحامي";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold text-dark"><i class="fas fa-trash-alt me-3 text-danger"></i> حذف محامي</h2>
        <a href="@Url.Action("Index", "Lawyers")" class="btn btn-secondary px-4 py-2">
            <i class="fas fa-arrow-right me-2"></i> العودة للقائمة
        </a>
    </div>

    @* رسالة تحذير بارزة ومصممة *@
    <div class="alert alert-danger alert-dismissible fade show text-right shadow-sm rounded-3 p-4 mb-4" role="alert" dir="rtl">
        <h4 class="alert-heading fw-bold"><i class="fas fa-exclamation-triangle me-2"></i> هل أنت متأكد من الحذف؟</h4>
        <p class="mb-2">
            ستقوم هذه العملية بحذف سجل المحامي من قاعدة البيانات بشكل دائم ولا يمكن التراجع عنها.
        </p>
        <hr class="my-3" />
        <p class="mb-0">
            <i class="fas fa-info-circle me-2"></i> **تنبيه:** سيتم **قطع ارتباط أي مستخدمين** مرتبطين بهذا المحامي تلقائياً قبل عملية الحذف.
        </p>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    @* عرض تفاصيل المحامي المراد حذفه في بطاقة *@
    <div class="card shadow-sm rounded-3">
        <div class="card-header bg-danger text-white p-3">
            <h5 class="mb-0 fw-bold">معلومات المحامي المراد حذفه</h5>
        </div>
        <div class="card-body p-4 text-right" dir="rtl">
            <div class="row g-3">
                <div class="col-md-6">
                    <p class="mb-2">
                        <strong class="text-dark">@Html.DisplayNameFor(model => model.FullName):</strong>
                        <span class="text-muted">@Html.DisplayFor(model => model.FullName)</span>
                    </p>
                </div>
                <div class="col-md-6">
                    <p class="mb-2">
                        <strong class="text-dark">@Html.DisplayNameFor(model => model.IdNumber):</strong>
                        <span class="text-muted">@Html.DisplayFor(model => model.IdNumber)</span>
                    </p>
                </div>
                <div class="col-md-6">
                    <p class="mb-2">
                        <strong class="text-dark">@Html.DisplayNameFor(model => model.ProfessionalStatus):</strong>
                        <span class="text-muted">@Html.DisplayFor(model => model.ProfessionalStatus)</span>
                    </p>
                </div>
                <div class="col-md-6">
                    <p class="mb-2">
                        <strong class="text-dark">@Html.DisplayNameFor(model => model.MembershipNumber):</strong>
                        <span class="text-muted">@Html.DisplayFor(model => model.MembershipNumber)</span>
                    </p>
                </div>
                <div class="col-md-6">
                    <p class="mb-2">
                        <strong class="text-dark">@Html.DisplayNameFor(model => model.IsActive):</strong>
                        <span class="text-muted">@Html.DisplayFor(model => model.IsActive)</span>
                    </p>
                </div>
            </div>

            @* عرض المستخدمين المرتبطين الذين سيتأثرون بالحذف *@
            @if (Model.LinkedUsers != null && Model.LinkedUsers.Any())
            {
                <hr class="my-4" />
                <h5 class="fw-bold mb-3 text-warning"><i class="fas fa-user-times me-2"></i> المستخدمون المتأثرون</h5>
                <p class="text-muted">
                    المستخدمون التاليون سيتم فصلهم عن هذا المحامي ولن يتم حذفهم:
                </p>
                <ul class="list-group">
                    @foreach (var user in Model.LinkedUsers)
                    {
                        <li class="list-group-item">
                            <i class="fas fa-user-circle me-2 text-secondary"></i>
                            @user.FullName (@user.UserName)
                        </li>
                    }
                </ul>
            }
        </div>
    </div>

    @* نموذج تأكيد الحذف مع أزرار الإجراءات *@
    @using (Html.BeginForm("Delete", "Lawyers", FormMethod.Post, new { @class = "mt-4 text-right d-flex gap-2" }))
    {
        @Html.AntiForgeryToken()
        <input type="hidden" name="id" value="@Model.IdNumber" />
        <button type="submit" class="btn btn-danger px-4 py-2 rounded-pill">
            <i class="fas fa-trash-alt me-2"></i> تأكيد الحذف
        </button>
        <a href="@Url.Action("Index", "Lawyers")" class="btn btn-secondary px-4 py-2 rounded-pill">
            <i class="fas fa-times me-2"></i> إلغاء
        </a>
    }
</div>